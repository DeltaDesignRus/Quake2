*** Ideas from HL (may be inimplementable) ***
// from pm_shader.c
- step sound: volume = 0.2/0.5 (walk/run)
- if moving slow - no step sounds
- walking/running: step sound length = 400/300; water = 600; ladder = 350
- stop when |velocity| less than STOP_EPSILON==0.1




*** BUGS ***
- map "temple2", "lavatube" -- waterfall: bullet sounds (change sound for water sparks, change place for water bullet sounds
  or something another ??)
- command line: "+set cddir <dir>" (etc.) - will display error, when var will be parsed 2nd time
- baseq2: "newgame" -- cannot break video and start game
- Sys_Error(ERR_FATAL): will not restore mouse (not always ??!)
- dedicated server: work without ref, so - crush when try some things (i.e. "com_speeds 1") --> make fake ref
  (and add support for colors, scrolling etc.)

? menu interface: appearing/disappearing fx (see itmastio etc.)

- chasecam (see Q3 cgame)
? improve collision detection for doors (do not open when player here or ability for player to leave
  door whith moving (trying to move))
? eliminate all qsort's

- bindtmp, alias[perm??], aliaslist (now it is "alias <no-args>")

- fix loading "sounds/[.]/path/name" (kill leading "/"?) in LoadBspFile

! remove auto-demo start on quake loading (option?)

! add materials: glass, grass, sand
- SURF_ALPHA, RF2_SURF_ALPHA: must be transparent for bullets (CONTENTS_WINDOW+SURF_ALPHA, mins=maxs={0,0,0})
- RF2_SURF_ALPHA, RF_TRANSLUCENT (for inline models): preprocess entstring and mark inline model surfaces with required flags
? make atmospheric effects (some maps in kingpin and halflife does, Q3F too ...)
  (make surface-dependent raindrop sounds? (KP:main/sound/world/rain*.wav))

? SOFT sprites: get sprite size not from md2, but from image dimansions (see new explosions ...); we can do it,
  because GL do this in this way

------------- API ----------------------------

- convert all "sprintf" -> "Com_sprintf" etc. (need regexp search)
- add Cmd_AddCommands(list,num), Cmd_RemoveCommands(list,num)
  - Cmd_AddCommands() may be implemented WITHOUT copying name, or just with using static cmdFunc_t for list
    (just insert into list, but add flags "do not free on remove")
  - macro CMD_ADD_COMMANDS(var) -> Cmd_AddCommands(var,sizeof(var)/sizeof(*var)) etc.
- add "Cmd_AddHidden()" - for server commands (cannot be completed/listed, but accessible)
  (or just implement with Cmd_AddCommand(), but use name prefix, which will be ignored for seaching/completion,
  but disables completion)
? Com_DWPrintf() -- same as Com_DPrintf(), but display only when "developer" != 0 (or "warnings" != 0 ??)

------------- MENUS --------------------------

- MTYPE_BITMAP + ownerdraw (see q3_ui/...)

-------------- CLIENT/SERVER -----------------

- record demos: make .dm2 file to be gzipped (produce with command other than "record"?)
  (may use old command too: who wants to send demo to other players, may just un-gzip it)
- demos with full list of events (already: serverrecord),
  player for this demos (total control over movement: move, chase, eye etc.)
- improve movement prediction:
  ? collide with entities
  ? use acceleration (see Q3, HL ??)
- cl_fx: compute (?) and send (!) particles/other fx to renderer only when whole effect in view frustum / max distance
  (mostly for particles)
- cl_newfx: allow to switch to new particle system / entity fx (powersuit etc.) WHEN new ref_gl used
  (flag for renderer: "qboolean newFx")
? improve speed of downloading: limited by qcommon.h::MAX_MSGLEN (used in )
  client: cl_parse.c :: CL_ParseDownload() - net_massege ;; SZ_Print(..,"nextdl")
  server: sv_user.c :: SV_NextDownload_f() - write_size=r (1024 max < MAX_MSGLEN)
? perform extended protocol checking by adding "[cl_]extprotocol" to userinfo
? make pmove player bounds be taken from the actual player model
? devmap <mapname>
? improve model precaching in cl_mail.c::CL_RequestNextDownload() (find FS_LoadFile) - make it with global
  LoadMd2() and global model list ??
? SV_FindIndex() -- use hash tables ?

------------ REF_GL (new) --------------

? zFar: round zFar/zNear to a power of 2 (??) for better depth precision

- sort shaders with sortParam + textureNum + lightmapNum (in that order)
- R_RecursiveWorldNode():
  1) surface visibility determination (already implemented in Q2/3)
  2) dlight-in-leaf (Q3)
  3) fog-in-leaf
  4) leaf-use-detailTex
- portals:
  - try software clipplane (1. add to frustum; 2. clip triangles)
  - add 2nd {viewcluster, leaf[].frame} set (1st for main scene, 2nd for portal) -- Q3 has recalculation of leaf visibility
    every frame twice, and without portal - once per few frames.
- better alt-tabbing (with CDS()), better GLimp_InitGL() (reserve stencil (?), gl_depthBits)
- coronas:
  ? corona lightstyles - find nearest surface with numLightStyles > 1) (implemented in KP)
  - auto-coronas for Q2 maps (scripted or with shader) - surfaces with certain shader will give corona in its center
    (often in Q2 DM maps)
- add SURF_WATER (or just disable auto-envmap when shaders will be implemented)
- place LoadMd2 outside ref_xxx and perform lovercase for a skin names
- use GL_NV_fog_distance (?) / GL_EXT_fog_coord, GL_EXT_env_combiner (!), GL_EXT_texture_filter_anisotropic (?)
? Q3: fog occlusion

BUGS:
? GL: looking through window to a dark wall will make wall brighter (use other blend mode?)
? vertexArrayRange not works (require (almost) complete rewritting)

------------ SOUND ---------------------

- fix stereo sound rotation (bad positioning)

- make camper sounds gender-sensitive; change sounds (get it from Thief II), but let old (current)
  system works with "sv_campersounds 2"
? spectator sounds (windy)
? try to move surface bullet sounds from client to server

* disable extra sounds (or replace with original) when it is not found

----------- VIDEO --------------

- add WriteTGA compression
- PCX: own palette for each file (??)
? h/w gamma: check for valid gamma when read
- video config menu: make "reset to defaults" works correctly (Cvar_Reset() ??)

- add bulletholes
? add kingpin default sky ("sr")

- ref_console (Win32 console-mode application, no GDI/OpenGL) -- auto-use in dedicated server (should attach
  dedicated server to ref)
? change "gl_console_only" and "sw_console_only" to "r_consoleOnly"

------------ COMMON --------------

? meminfo (see Alice) - renderer (hunks), z, chains etc. ???

- change particles (as in Kingpin)
  client/cl_fx.c :: CL_AddParticles()
  ref_gl/gl_rmain.c :: R_DrawParticles()

??(fixed?) Z_DEBUG: make following (#ifdef Z_DEBUG)
  - #define Z_BlockMalloc(size) Z_TagMalloc(size,0)
  - #define Z_Malloc(size) Z_TagMalloc(size,0)
  - add "void *caller_addr" to zblock_t and fill it in Z_TagMalloc with a return address
    == "*((int*)first_param - 1)"
  - make checking memory in "z_stats" (show damaged block info's - size, caller address ...)
    anbd Z_Free()

? command line parsing: add special chars ('\"' etc.)

? implement FS_ListFiles() / FreeNamedList() within a memory chains (not just linked list)
? make AllocChainBlock() will try to use free space of PREVIOUS blocks when current is full

- add cvar "log_texts" -- log text, which was output with DrawText[Left|Right|Pos]();
  value of "2" - log 1 frame and disable

- make zip/* big-endian compatible; update to "zlib1.1.4"

------------- CVARS --------------------

? cvarclear - clear all archive flags from cvars, which was not created with quake2 (created with "set <var> <value> a" command)
? cvar_mon varname [message]  - monitor cvar on screen (default message = varname)
? cvar_unmon varname  - stop monitor for cvar
? "cvar_restart" (== "reset *" ??)
? completion cvarnames after "set", "toggle", "add" (etc.) and "...$varname"
  (add flags for Cmd_AddCommand() - complete type: cvar, map, demo ... ???)

------------- LINUX --------------------

- check all "#pragma pack" places
- check Sys_FindFirst/FindNext/FindClose to work correctly (on Win32 was a bug: when canthave=DIR and 1st match
  found is a directory (".",".." or other) - no more searches performed, because FindFirst()/FindNext() returned NULL
- update video config menu
? loading Win32 mods (Wine)
- hardware gamma (see /usr/X11R6/bin/xgamma as example ...)
- LoadRefresh: "vid_ref->modified = false" when OK
